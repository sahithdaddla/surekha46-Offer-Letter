<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Portal</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: #f0f2f5;
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }

        .checkbox-label {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            cursor: pointer;
        }

        .checkbox-label input[type="checkbox"] {
            margin-right: 10px;
            cursor: pointer;
        }

        #prevEmploymentFields {
            transition: opacity 0.3s ease;
        }

        .info-icon {
            color: #3498db;
            cursor: help;
            margin-left: 5px;
            display: inline-block;
        }

        .error-message {
            color: #e74c3c;
            font-size: 0.8rem;
            margin-top: 5px;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        input:invalid, select:invalid {
            border-color: #e74c3c;
        }

        input:valid.validated, select:valid.validated {
            border-color: #2ecc71;
        }

        .char-counter {
            font-size: 0.7rem;
            color: #7f8c8d;
            text-align: right;
            margin-top: 2px;
        }

        .field-validated {
            color: #2ecc71;
            margin-left: 5px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
        }

        .header {
            text-align: center;
            margin-bottom: 2rem;
            background: #3498db;
            color: white;
            padding: 1rem;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .header h1 {
            margin-bottom: 0.5rem;
            font-size: 2.2rem;
        }

        .card {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
            display: none;
            border-top: 4px solid #3498db;
            transition: all 0.3s ease;
        }

        .card.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card-title {
            color: #2c3e50;
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
            border-bottom: 1px solid #eee;
            padding-bottom: 0.5rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #2c3e50;
        }

        input[type="text"],
        input[type="email"],
        input[type="tel"],
        input[type="number"],
        select {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
            transition: border-color 0.3s, box-shadow 0.3s;
        }

        input:focus,
        select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }

        .button-group {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
        }

        button {
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 5px;
            background: #3498db;
            color: white;
            cursor: pointer;
            font-size: 1rem;
            transition: background 0.3s, transform 0.1s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        button:hover {
            background: #2980b9;
        }

        button:active {
            transform: translateY(1px);
        }

        button.prev {
            background: #95a5a6;
        }

        button.prev:hover {
            background: #7f8c8d;
        }

        .required {
            color: #e74c3c;
            font-weight: bold;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: #eee;
            border-radius: 10px;
            margin-bottom: 2rem;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: linear-gradient(to right, #3498db, #2980b9);
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .file-upload {
            margin-top: 0.5rem;
        }

        .login-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            text-decoration: none;
        }

        #refreshLink {
            color: blue;
            text-decoration: underline;
            cursor: pointer;
            margin-top: 10px;
            display: block;
            text-align: center;
        }

        #page1, #page2, #page6 {
            background: linear-gradient(to bottom right, #ffffff, #f9fdff);
        }

        .role-options, .location-options {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            margin: 1rem 0;
        }

        .role-option, .location-option {
            width: 32%;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
        }

        .role-option:hover, .location-option:hover {
            border-color: #3498db;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .role-option.selected, .location-option.selected {
            border-color: #3498db;
            background-color: #ebf5fb;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .role-icon, .location-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            color: #3498db;
        }

        .role-name, .location-name {
            font-weight: 600;
            color: #2c3e50;
        }

        .role-description, .location-description {
            font-size: 0.8rem;
            color: #7f8c8d;
            margin-top: 0.5rem;
        }

        .card-info {
            background-color: #f8f9fa;
            padding: 1rem;
            border-radius: 5px;
            margin-bottom: 1rem;
            border-left: 4px solid #3498db;
        }

        .card-info h3 {
            color: #2c3e50;
            margin-bottom: 0.5rem;
            font-size: 1rem;
        }

        .card-info p {
            color: #7f8c8d;
            font-size: 0.9rem;
        }

        .file-upload {
            position: relative;
            overflow: hidden;
            display: inline-block;
            width: 100%;
        }

        .file-upload input[type="file"] {
            font-size: 100px;
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            cursor: pointer;
        }

        .file-upload-label {
            display: inline-block;
            padding: 0.5rem 1rem;
            background: #f8f9fa;
            border: 1px dashed #ccc;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
            text-align: center;
            transition: all 0.3s;
        }

        .file-upload-label:hover {
            background: #e9ecef;
            border-color: #3498db;
        }

        .file-name {
            margin-top: 0.5rem;
            font-size: 0.8rem;
            color: #7f8c8d;
        }

        .custom-radio-group {
            margin-bottom: 20px;
        }

        .custom-radio-container {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
        }

        .custom-radio {
            display: flex;
            align-items: center;
            cursor: pointer;
        }

        .custom-radio input[type="radio"] {
            position: absolute;
            opacity: 0;
            cursor: pointer;
        }

        .radio-label {
            position: relative;
            padding-left: 30px;
            cursor: pointer;
            font-size: 16px;
            user-select: none;
        }

        .radio-label:before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            border: 2px solid #3498db;
            border-radius: 50%;
            background-color: #fff;
        }

        .custom-radio input[type="radio"]:checked + .radio-label:before {
            border-color: #3498db;
        }

        .custom-radio input[type="radio"]:checked + .radio-label:after {
            content: '';
            position: absolute;
            left: 5px;
            top: 50%;
            transform: translateY(-50%);
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: #3498db;
        }

        .custom-checkbox {
            display: block;
            position: relative;
            padding-left: 30px;
            margin-bottom: 12px;
            cursor: pointer;
            font-size: 16px;
            user-select: none;
        }

        .custom-checkbox input {
            position: absolute;
            opacity: 0;
            cursor: pointer;
            height: 0;
            width: 0;
        }

        .checkmark {
            position: absolute;
            top: 0;
            left: 0;
            height: 20px;
            width: 20px;
            background-color: #fff;
            border: 2px solid #3498db;
            border-radius: 4px;
        }

        .custom-checkbox:hover input ~ .checkmark {
            background-color: #f1f9ff;
        }

        .custom-checkbox input:checked ~ .checkmark {
            background-color: #3498db;
        }

        .checkmark:after {
            content: "";
            position: absolute;
            display: none;
        }

        .custom-checkbox input:checked ~ .checkmark:after {
            display: block;
        }

        .custom-checkbox .checkmark:after {
            left: 6px;
            top: 2px;
            width: 5px;
            height: 10px;
            border: solid white;
            border-width: 0 2px 2px 0;
            transform: rotate(45deg);
        }

        #previousEmploymentFields {
            margin-top: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background-color: #f9f9f9;
            display: none;
        }

        .char-counter {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
            text-align: right;
        }

        #position {
            border: 1px solid #ddd;
        }

        .file-name {
            display: none;
            margin-top: 5px;
            color: #2ecc71;
            font-weight: bold;
        }

        .reset-button {
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
        }

        .reset-button:hover {
            background-color: #c0392b;
        }

        .success-card {
            text-align: center;
            padding: 3rem;
        }

        .success-card h2 {
            color: #2ecc71;
            margin-bottom: 1rem;
        }

        .referral-id {
            font-size: 1.2rem;
            font-weight: 600;
            color: #2c3e50;
            background: #f8f9fa;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            display: inline-block;
            margin: 1rem 0;
        }

        .copy-button {
            background: #2ecc71;
            margin-left: 1rem;
            padding: 0.5rem 1rem;
        }

        .copy-button:hover {
            background: #27ae60;
        }

        .copy-message {
            color: #2ecc71;
            font-size: 0.9rem;
            margin-top: 0.5rem;
            display: none;
        }

        .success-message {
            color: #7f8c8d;
            margin-top: 1rem;
        }

        .start-over-button {
            margin-top: 2rem;
            background: #3498db;
        }

        .start-over-button:hover {
            background: #2980b9;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Employee Portal</h1>
            <p>Please fill in your details</p>
        </div>

        <div class="progress-bar">
            <div class="progress" id="progress"></div>
        </div>

        <!-- Card 1: Role -->
        <div class="card active" id="page1">
            <h2 class="card-title">Role Selection</h2>
            <div class="form-group">
                <label>Position <span class="required">*</span></label>
                <div class="role-options">
                    <div class="role-option" data-value="trainee" onclick="selectRole(this, 'trainee')">
                        <div class="role-icon">üë®‚Äçüéì</div>
                        <div class="role-name">Trainee</div>
                        <div class="role-description">Entry-level position for new graduates</div>
                    </div>
                    <div class="role-option" data-value="associate" onclick="selectRole(this, 'associate')">
                        <div class="role-icon">üë®‚Äçüíº</div>
                        <div class="role-name">Associate</div>
                        <div class="role-description">Mid-level position with 1-3 years experience</div>
                    </div>
                    <div class="role-option" data-value="senior" onclick="selectRole(this, 'senior')">
                        <div class="role-icon">üë®‚Äçüè´</div>
                        <div class="role-name">Senior</div>
                        <div class="role-description">Senior-level position with 3+ years experience</div>
                    </div>
                </div>
                <select id="role" required style="display: none;">
                    <option value="">Select Role</option>
                    <option value="trainee">Trainee</option>
                    <option value="associate">Associate</option>
                    <option value="senior">Senior</option>
                </select>
                <div id="roleError" class="error-message"></div>
            </div>
            
            <div class="form-group">
                <label for="position">Role<span class="required">*</span></label>
                <select id="position" required>
                    <option value="" disabled selected>Select a role</option>
                    <option value="developer">Developer</option>
                    <option value="tester">Tester</option>
                    <option value="hr">HR</option>
                    <option value="finance">Finance</option>
                    <option value="manager">Manager</option>
                    <option value="designer">Designer</option>
                    <option value="projectManager">Project Manager</option>
                    <option value="sales">Sales</option>
                    <option value="marketing">Marketing</option>
                    <option value="customerSupport">Customer Support</option>
                </select>
                <div id="positionError" class="error-message"></div>
            </div>
            
            <div class="button-group">
                <div></div>
                <button onclick="nextPage(1)">Next</button>
            </div>
        </div>

        <!-- Card 2: Location -->
        <div class="card" id="page2">
            <h2 class="card-title">Location Selection</h2>
            <div class="form-group">
                <label>Location <span class="required">*</span></label>
                <div class="location-options">
                    <div class="location-option" data-value="hyderabad" onclick="selectLocation(this, 'hyderabad')">
                        <div class="location-icon">üèôÔ∏è</div>
                        <div class="location-name">Hyderabad</div>
                        <div class="location-description">Kondapur, Telangana</div>
                    </div>
                    <div class="location-option" data-value="pune" onclick="selectLocation(this, 'pune')">
                        <div class="location-icon">üè¢</div>
                        <div class="location-name">Pune</div>
                        <div class="location-description">Hinjewadi IT Park, Maharashtra</div>
                    </div>
                    <div class="location-option" data-value="bangalore" onclick="selectLocation(this, 'bangalore')">
                        <div class="location-icon">üåÜ</div>
                        <div class="location-name">Bangalore</div>
                        <div class="location-description">Electronic City, Karnataka</div>
                    </div>
                </div>
                <select id="location" required style="display: none;">
                    <option value="">Select Location</option>
                    <option value="hyderabad">Hyderabad</option>
                    <option value="pune">Pune</option>
                    <option value="bangalore">Bangalore</option>
                </select>
                <div id="locationError" class="error-message"></div>
            </div>
            
            <div class="button-group">
                <button class="prev" onclick="prevPage(2)">Previous</button>
                <button onclick="nextPage(2)">Next</button>
            </div>
        </div>

        <!-- Card 3: Personal Details -->
        <div class="card" id="page3">
            <h2 class="card-title">Personal Details</h2>
            <div class="form-group">
                <label>Full Name <span class="required">*</span></label>
                <input type="text" id="name" required placeholder="Enter your full name">
                <div id="nameError" class="error-message"></div>
            </div>
            <div class="form-group">
                <label>Email <span class="required">*</span></label>
                <input type="email" id="email" required placeholder="Enter your email address">
                <div id="emailError" class="error-message"></div>
            </div>
            <div class="form-group">
                <label>Phone Number <span class="required">*</span></label>
                <input type="tel" id="phone" required placeholder="Enter your 10-digit phone number">
                <div id="phoneError" class="error-message"></div>
            </div>
            <div class="form-group">
                <label>Guardian Name <span class="required">*</span></label>
                <input type="text" id="guardianName" required placeholder="Enter guardian's name">
                <div id="guardianNameError" class="error-message"></div>
            </div>
            <div class="form-group">
                <label>Guardian Number <span class="required">*</span></label>
                <input type="tel" id="guardianPhone" required placeholder="Enter guardian's 10-digit phone number">
                <div id="guardianPhoneError" class="error-message"></div>
            </div>
            <div class="form-group">
                <label>Current Address <span class="required">*</span></label>
                <input type="text" id="address" required placeholder="Enter your complete address">
                <div class="char-counter" id="addressCounter">0/200 characters</div>
                <div id="addressError" class="error-message"></div>
            </div>
            <div class="button-group">
                <button class="prev" onclick="prevPage(3)">Previous</button>
                <button onclick="nextPage(3)">Next</button>
            </div>
        </div>

        <!-- Card 4: Certification/Education -->
        <div class="card" id="page4">
            <h2 class="card-title">Educational Documents</h2>
            <div class="form-group">
                <label>SSC Certificate <span class="required">*</span></label>
                <div class="file-upload">
                    <label class="file-upload-label" id="sscLabel">
                        <span>Upload SSC Certificate</span>
                        <input type="file" id="ssc" class="file-upload" required accept=".pdf,.jpg,.jpeg,.png" onchange="updateFileName(this, 'sscLabel')">
                    </label>
                    <div class="file-name" id="sscFileName"></div>
                </div>
                <span id="sscError" class="error-message"></span>
            </div>
            <div class="form-group">
                <label>HSC Certificate <span class="required">*</span></label>
                <div class="file-upload">
                    <label class="file-upload-label" id="hscLabel">
                        <span>Upload HSC Certificate</span>
                        <input type="file" id="hsc" class="file-upload" required accept=".pdf,.jpg,.jpeg,.png" onchange="updateFileName(this, 'hscLabel')">
                    </label>
                    <div class="file-name" id="hscFileName"></div>
                </div>
                <span id="hscError" class="error-message"></span>
            </div>
            <div class="form-group">
                <label>UG Certificate <span class="required">*</span></label>
                <div class="file-upload">
                    <label class="file-upload-label" id="ugLabel">
                        <span>Upload UG Certificate</span>
                        <input type="file" id="ug" class="file-upload" required accept=".pdf,.jpg,.jpeg,.png" onchange="updateFileName(this, 'ugLabel')">
                    </label>
                    <div class="file-name" id="ugFileName"></div>
                </div>
                <span id="ugError" class="error-message"></span>
            </div>
            <div class="form-group">
                <label>PG Certificate (Optional)</label>
                <div class="file-upload">
                    <label class="file-upload-label" id="pgLabel">
                        <span>Upload PG Certificate (if available)</span>
                        <input type="file" id="pg" class="file-upload" accept=".pdf,.jpg,.jpeg,.png" onchange="updateFileName(this, 'pgLabel')">
                    </label>
                    <span id="pgFileName" class="file-name"></span>
                    <span id="pgError" class="error-message"></span>
                </div>
            </div>
            <div class="button-group">
                <button class="prev" onclick="prevPage(4)">Previous</button>
                <button onclick="nextPage(4)">Next</button>
            </div>
        </div>

        <!-- Card 5: Previous Employment -->
        <div class="card" id="page5">
            <h2 class="card-title">Previous Employment Details</h2>
            <div class="form-group">
                <label>Experience Type:</label>
                <div class="custom-radio-container">
                    <div class="custom-radio">
                        <input type="radio" id="fresher" name="experienceType" value="fresher" checked>
                        <label for="fresher" class="radio-label">Fresher</label>
                    </div>
                    <div class="custom-radio">
                        <input type="radio" id="experienced" name="experienceType" value="experienced">
                        <label for="experienced" class="radio-label">Experienced</label>
                    </div>
                </div>
            </div>
            
            <div id="previousEmploymentFields">
                <h3>Previous Employment Details</h3>
                <div class="form-group">
                    <label for="prevCompany">Previous Company:</label>
                    <input type="text" id="prevCompany" name="prevCompany" maxlength="30">
                    <div id="prevCompanyError" class="error-message"></div>
                </div>
                <div class="form-group">
                    <label for="prevExperience">Years at Previous Company:</label>
                    <input type="number" id="prevExperience" name="prevExperience" maxlength="2">
                    <div id="prevExperienceError" class="error-message"></div>
                </div>
                <div class="form-group">
                    <label for="prevRole">Previous Role:</label>
                    <input type="text" id="prevRole" name="prevRole" maxlength="100">
                    <div id="prevRoleError" class="error-message"></div>
                </div>
                <div class="form-group">
                    <label>Relieving Letter:</label>
                    <div class="file-upload">
                        <label id="relievingLetterLabel" for="relievingLetter" class="file-upload-label">
                            <span>Choose File</span>
                        </label>
                        <input type="file" id="relievingLetter" name="relievingLetter" accept=".pdf,.jpg,.jpeg,.png">
                        <div id="relievingLetterFileName" class="file-name"></div>
                    </div>
                    <div id="relievingLetterError" class="error-message"></div>
                </div>
            </div>
            <div class="button-group">
                <button type="button" onclick="prevPage(5)">Previous</button>
                <button type="button" onclick="submitForm()">Submit</button>
            </div>
        </div>

        <!-- Card 6: Success Message -->
        <div class="card success-card" id="page6">
            <h2>Form Submitted Successfully!</h2>
            <p>Your application has been received.</p>
            <div class="referral-id" id="referralIdDisplay">REF-XXXXXXXXX</div>
            <button class="copy-button" onclick="copyReferralId()">Copy Referral ID</button>
            <div class="copy-message" id="copyMessage">Referral ID copied to clipboard!</div>
            <p class="success-message">Please save this Referral ID for future reference.</p>
            <button class="start-over-button" onclick="resetForm()">Start Over</button>
        </div>
    </div>

    <script>
        // Utility function to convert file to base64 (for in-memory storage)
        function getBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = () => resolve(reader.result);
                reader.onerror = error => reject(error);
            });
        }

        let currentPage = 1;
        const totalPages = 6;

        function updateProgressBar() {
            console.log(`Updating progress bar: currentPage=${currentPage}, totalPages=${totalPages}`);
            const progress = (currentPage - 1) / (totalPages - 1) * 100;
            document.getElementById('progress').style.width = `${progress}%`;
        }

        function showPage(pageNumber) {
            console.log(`Showing page: ${pageNumber}`);
            for (let i = 1; i <= totalPages; i++) {
                const page = document.getElementById(`page${i}`);
                if (page) {
                    page.classList.toggle('active', i === pageNumber);
                }
            }
            currentPage = pageNumber;
            updateProgressBar();
        }

        function updateFileName(input, labelId) {
            const fileName = input.files[0]?.name;
            const fileNameElement = document.getElementById(input.id + 'FileName');
            
            if (fileName) {
                const validExtensions = ['.pdf', '.jpg', '.jpeg', '.png'];
                const extension = fileName.slice(fileName.lastIndexOf('.')).toLowerCase();
                const errorElement = document.getElementById(`${input.id}Error`);
                
                if (!validExtensions.includes(extension)) {
                    errorElement.textContent = `Invalid file format. Only ${validExtensions.join(', ')} allowed`;
                    errorElement.style.display = 'block';
                    input.value = '';
                    fileNameElement.textContent = '';
                    fileNameElement.style.display = 'none';
                    document.getElementById(labelId).querySelector('span').textContent = 'Choose File';
                    return;
                }

                fileNameElement.textContent = fileName + ' ‚úì';
                fileNameElement.style.display = 'block';
                fileNameElement.style.color = '#2ecc71';
                fileNameElement.style.fontWeight = 'bold';
                
                document.getElementById(labelId).querySelector('span').textContent = 'File Selected';
                
                if (errorElement) {
                    errorElement.textContent = '';
                    errorElement.style.display = 'none';
                }
            } else {
                fileNameElement.textContent = '';
                document.getElementById(labelId).querySelector('span').textContent = 'Choose File';
            }
        }

        function copyReferralId() {
            const referralId = document.getElementById('referralIdDisplay').textContent;
            navigator.clipboard.writeText(referralId).then(() => {
                const copyMessage = document.getElementById('copyMessage');
                copyMessage.style.display = 'block';
                setTimeout(() => {
                    copyMessage.style.display = 'none';
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy: ', err);
            });
        }

        function clearErrors() {
            const errorElements = document.querySelectorAll('.error-message');
            errorElements.forEach(el => el.textContent = '');
        }

        function validateName(name) {
            const nameRegex = /^[A-Za-z\s]{5,30}$/;
            return nameRegex.test(name);
        }

        function restrictToAlphabetsAndSpaces(input) {
            if (input.value.length > 0 && input.value.charAt(0) === ' ') {
                input.value = input.value.substring(1);
            }
            
            input.value = input.value.replace(/[^A-Za-z\s]/g, '');
            input.value = input.value.replace(/\s\s+/g, ' ');
            
            if (input.value.length > 30) {
                input.value = input.value.slice(0, 30);
            }
        }

        function validateCompanyName(name) {
            const nameRegex = /^[A-Za-z\s]{5,30}$/;
            return nameRegex.test(name);
        }

        function validateRole(role) {
            const roleRegex = /^[A-Za-z\s]{1,100}$/;
            return roleRegex.test(role);
        }

        function validateYearsOfExperience(years) {
            const yearsRegex = /^\d{1,2}$/;
            const numYears = parseInt(years, 10);
            return yearsRegex.test(years) && numYears >= 0 && numYears <= 45;
        }

        function restrictToTwoDigits(input) {
            input.value = input.value.replace(/[^0-9]/g, '');
            if (input.value.length > 2) {
                input.value = input.value.slice(0, 2);
            }
            const numValue = parseInt(input.value, 10);
            if (numValue > 45) {
                input.value = input.value.slice(0, 1);
            }
        }

        function validateEmail(email) {
            const emailRegex = /^[a-zA-Z0-9][a-zA-Z0-9._]{4,}@gmail\.com$/;
            return emailRegex.test(email) && email.length <= 40;
        }

        function restrictEmailInput(input) {
            input.value = input.value.replace(/\s\s+/g, ' ').trim();
            input.value = input.value.replace(/[^a-zA-Z0-9@._]/g, '');
            if (input.value.length > 40) {
                input.value = input.value.slice(0, 40);
            }
        }

        function validatePhone(phone) {
            const phoneRegex = /^[6-9]\d{9}$/;
            const isRepetitive = /^(\d)\1{9}$/.test(phone);
            const isSequential = phone === '1234567890' || phone === '0987654321';
            return phoneRegex.test(phone) && !isRepetitive && !isSequential;
        }

        function restrictToDigits(input) {
            input.value = input.value.replace(/[^0-9]/g, '');
            if (input.value.length > 10) {
                input.value = input.value.slice(0, 10);
            }
        }

        function validateAddress(address) {
            const digitOrSpecialRegex = /[0-9!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]{5,}/;
            return address.length <= 200 && !/\s{2,}/.test(address) && !digitOrSpecialRegex.test(address);
        }

        function restrictAddressInput(input) {
            if (input.value.startsWith(' ')) {
                input.value = input.value.substring(1);
            }
            input.value = input.value.replace(/\s{2,}/g, ' ');
            const digitOrSpecialRegex = /([0-9!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?])\1{4,}/g;
            input.value = input.value.replace(digitOrSpecialRegex, (match) => match.slice(0, 4));
            if (input.value.length > 200) {
                input.value = input.value.slice(0, 200);
            }
        }

        function selectRole(element, value) {
            const allRoles = document.querySelectorAll('.role-option');
            allRoles.forEach(role => role.classList.remove('selected'));
            
            element.classList.add('selected');
            document.getElementById('role').value = value;
            
            document.getElementById('roleError').textContent = '';
            document.getElementById('roleError').style.display = 'none';
        }

        function selectLocation(element, value) {
            const allLocations = document.querySelectorAll('.location-option');
            allLocations.forEach(location => location.classList.remove('selected'));
            
            element.classList.add('selected');
            document.getElementById('location').value = value;
            
            document.getElementById('locationError').textContent = '';
            document.getElementById('locationError').style.display = 'none';
        }

        const fileFields = ['ssc', 'hsc', 'ug', 'pg', 'relievingLetter'];
        fileFields.forEach(field => {
            const fileNameElement = document.getElementById(field + 'FileName');
            if (!fileNameElement) {
                const newFileNameElement = document.createElement('div');
                newFileNameElement.id = field + 'FileName';
                newFileNameElement.className = 'file-name';
                newFileNameElement.style.display = 'none';
                document.getElementById(field).parentElement.appendChild(newFileNameElement);
            }
        });

        function limitInputLength(input, maxLength) {
            if (input.value.length > maxLength) {
                input.value = input.value.slice(0, maxLength);
            }
            return input.value.length;
        }

        function updateCharCounter(input, counterId, maxLength) {
            const length = limitInputLength(input, maxLength);
            document.getElementById(counterId).textContent = `${length}/${maxLength} characters`;
        }

        function togglePreviousEmploymentFields() {
            const isExperienced = document.getElementById('experienced').checked;
            const prevEmploymentFields = document.getElementById('previousEmploymentFields');
            const prevCompanyError = document.getElementById('prevCompanyError');
            const prevExperienceError = document.getElementById('prevExperienceError');
            const prevRoleError = document.getElementById('prevRoleError');
            const relievingLetterError = document.getElementById('relievingLetterError');
            
            if (isExperienced) {
                prevEmploymentFields.style.display = 'block';
                
                document.getElementById('prevCompany').setAttribute('required', '');
                document.getElementById('prevExperience').setAttribute('required', '');
                document.getElementById('prevRole').setAttribute('required', '');
                document.getElementById('relievingLetter').setAttribute('required', '');
            } else {
                prevEmploymentFields.style.display = 'none';
                
                document.getElementById('prevCompany').removeAttribute('required');
                document.getElementById('prevExperience').removeAttribute('required');
                document.getElementById('prevRole').removeAttribute('required');
                document.getElementById('relievingLetter').removeAttribute('required');
                
                document.getElementById('prevCompany').value = '';
                document.getElementById('prevExperience').value = '';
                document.getElementById('prevRole').value = '';
                document.getElementById('relievingLetter').value = '';
                
                if (prevCompanyError) prevCompanyError.style.display = 'none';
                if (prevExperienceError) prevExperienceError.style.display = 'none';
                if (prevRoleError) prevRoleError.style.display = 'none';
                if (relievingLetterError) relievingLetterError.style.display = 'none';
            }
        }

        function validateInputField(input, errorId, validationFunction, errorMessage) {
            const errorElement = document.getElementById(errorId);
            if (!errorElement) return;
            
            if (!input.value.trim()) {
                errorElement.textContent = 'This field is required';
                errorElement.style.display = 'block';
                input.style.borderColor = 'red';
            } else if (!validationFunction(input.value)) {
                errorElement.textContent = errorMessage;
                errorElement.style.display = 'block';
                input.style.borderColor = 'red';
            } else {
                errorElement.textContent = '';
                errorElement.style.display = 'none';
                input.style.borderColor = '#2ecc71';
            }
        }

        function validatePage(page) {
            clearErrors();
            const currentForm = document.getElementById(`page${page}`);
            const requiredInputs = currentForm.querySelectorAll('[required]');
            let valid = true;

            requiredInputs.forEach(input => {
                const inputId = input.id;
                const errorElement = document.getElementById(`${inputId}Error`);
                
                if (!errorElement) {
                    console.error(`Error element not found for ${inputId}`);
                    return;
                }

                input.style.borderColor = '#ddd';
                errorElement.style.display = 'block';
                errorElement.style.color = 'red';
                errorElement.style.fontSize = '12px';
                errorElement.style.marginTop = '5px';

                switch(inputId) {
                    case 'name':
                        if (!input.value.trim()) {
                            errorElement.textContent = 'Name is required';
                            input.style.borderColor = 'red';
                            valid = false;
                        } else if (!validateName(input.value)) {
                            errorElement.textContent = 'Name must be 5-30 alphabets and spaces';
                            input.style.borderColor = 'red';
                            valid = false;
                        } else {
                            input.style.borderColor = '#2ecc71';
                            input.classList.add('validated');
                            errorElement.style.display = 'none';
                        }
                        break;
                    case 'guardianName':
                        if (!input.value.trim()) {
                            errorElement.textContent = 'Guardian name is required';
                            input.style.borderColor = 'red';
                            valid = false;
                        } else if (!validateName(input.value)) {
                            errorElement.textContent = 'Guardian name must be 5-30 alphabets and spaces';
                            input.style.borderColor = 'red';
                            valid = false;
                        } else {
                            input.style.borderColor = '#2ecc71';
                            input.classList.add('validated');
                            errorElement.style.display = 'none';
                        }
                        break;
                    case 'email':
                        if (!input.value.trim()) {
                            errorElement.textContent = 'Email is required';
                            input.style.borderColor = 'red';
                            valid = false;
                        } else if (!validateEmail(input.value)) {
                            errorElement.textContent = 'Email must have at least 5 alphanumeric characters before @gmail.com and only allow @, ., _';
                            input.style.borderColor = 'red';
                            valid = false;
                        } else {
                            input.style.borderColor = '#2ecc71';
                            input.classList.add('validated');
                            errorElement.style.display = 'none';
                        }
                        break;
                    case 'phone':
                        if (!input.value.trim()) {
                            errorElement.textContent = 'Phone number is required';
                            input.style.borderColor = 'red';
                            valid = false;
                        } else if (!validatePhone(input.value)) {
                            errorElement.textContent = 'Phone number must be 10 digits, start with 6-9, and not be repetitive or sequential';
                            input.style.borderColor = 'red';
                            valid = false;
                        } else {
                            const guardianPhone = document.getElementById('guardianPhone').value;
                            if (guardianPhone && input.value === guardianPhone) {
                                errorElement.textContent = 'Phone number cannot be the same as guardian phone';
                                input.style.borderColor = 'red';
                                valid = false;
                            } else {
                                input.style.borderColor = '#2ecc71';
                                input.classList.add('validated');
                                errorElement.style.display = 'none';
                            }
                        }
                        break;
                    case 'guardianPhone':
                        if (!input.value.trim()) {
                            errorElement.textContent = 'Guardian phone number is required';
                            input.style.borderColor = 'red';
                            valid = false;
                        } else if (!validatePhone(input.value)) {
                            errorElement.textContent = 'Guardian phone must be 10 digits, start with 6-9, and not be repetitive or sequential';
                            input.style.borderColor = 'red';
                            valid = false;
                        } else {
                            const phone = document.getElementById('phone').value;
                            if (phone && input.value === phone) {
                                errorElement.textContent = 'Guardian phone cannot be the same as your phone';
                                input.style.borderColor = 'red';
                                valid = false;
                            } else {
                                input.style.borderColor = '#2ecc71';
                                input.classList.add('validated');
                                errorElement.style.display = 'none';
                            }
                        }
                        break;
                    case 'address':
                        if (!input.value.trim()) {
                            errorElement.textContent = 'Address is required';
                            input.style.borderColor = 'red';
                            valid = false;
                        } else if (!validateAddress(input.value)) {
                            errorElement.textContent = 'Address cannot exceed 200 characters, contain multiple spaces, or have 5+ consecutive digits/special characters';
                            input.style.borderColor = 'red';
                            valid = false;
                        } else {
                            input.style.borderColor = '#2ecc71';
                            input.classList.add('validated');
                            errorElement.style.display = 'none';
                        }
                        break;
                    case 'location':
                        if (!input.value) {
                            errorElement.textContent = 'Location is required';
                            errorElement.style.display = 'block';
                            valid = false;
                        } else {
                            input.classList.add('validated');
                            errorElement.style.display = 'none';
                        }
                        break;
                    case 'role':
                        if (!input.value) {
                            errorElement.textContent = 'Role is required';
                            errorElement.style.display = 'block';
                            valid = false;
                        } else {
                            input.classList.add('validated');
                            errorElement.style.display = 'none';
                        }
                        break;
                    case 'position':
                        if (!input.value) {
                            errorElement.textContent = 'Position is required';
                            errorElement.style.display = 'block';
                            valid = false;
                        } else {
                            input.classList.add('validated');
                            errorElement.style.display = 'none';
                        }
                        break;
                    case 'prevCompany':
                        if (!input.value.trim()) {
                            errorElement.textContent = 'Company name is required';
                            input.style.borderColor = 'red';
                            valid = false;
                        } else if (!validateCompanyName(input.value)) {
                            errorElement.textContent = 'Company name must be 5-30 alphabets and spaces';
                            input.style.borderColor = 'red';
                            valid = false;
                        } else {
                            input.style.borderColor = '#2ecc71';
                            input.classList.add('validated');
                            errorElement.style.display = 'none';
                        }
                        break;
                    case 'prevExperience':
                        if (!input.value.trim()) {
                            errorElement.textContent = 'Years of experience is required';
                            input.style.borderColor = 'red';
                            valid = false;
                        } else if (!validateYearsOfExperience(input.value)) {
                            errorElement.textContent = 'Years of experience must be 0-45 years';
                            input.style.borderColor = 'red';
                            valid = false;
                        } else {
                            input.style.borderColor = '#2ecc71';
                            input.classList.add('validated');
                            errorElement.style.display = 'none';
                        }
                        break;
                    case 'prevRole':
                        if (!input.value.trim()) {
                            errorElement.textContent = 'Role is required';
                            input.style.borderColor = 'red';
                            valid = false;
                        } else if (!validateRole(input.value)) {
                            errorElement.textContent = 'Role must be 1-100 alphabets and spaces';
                            input.style.borderColor = 'red';
                            valid = false;
                        } else {
                            input.style.borderColor = '#2ecc71';
                            input.classList.add('validated');
                            errorElement.style.display = 'none';
                        }
                        break;
                    case 'ssc':
                    case 'hsc':
                    case 'ug':
                        if (input.files.length === 0) {
                            errorElement.textContent = 'This certificate is required';
                            errorElement.style.display = 'block';
                            valid = false;
                        } else {
                            input.classList.add('validated');
                            errorElement.style.display = 'none';
                        }
                        break;
                    case 'relievingLetter':
                        if (document.getElementById('experienced').checked) {
                            if (input.files.length === 0) {
                                errorElement.textContent = 'Relieving letter is required for experienced professionals';
                                errorElement.style.display = 'block';
                                valid = false;
                            } else {
                                input.classList.add('validated');
                                errorElement.style.display = 'none';
                            }
                        }
                        break;
                    default:
                        if (input.hasAttribute('required') && !input.value.trim()) {
                            errorElement.textContent = 'This field is required';
                            input.style.borderColor = 'red';
                            valid = false;
                        } else {
                            input.classList.add('validated');
                            errorElement.style.display = 'none';
                        }
                }
            });

            return valid;
        }

        function nextPage(page) {
            if (validatePage(page)) {
                showPage(page + 1);
            }
        }

        function prevPage(page) {
            showPage(page - 1);
        }

        function resetForm() {
            console.log('Resetting form');
            document.querySelectorAll('input').forEach(input => {
                input.value = '';
                input.style.borderColor = '#ddd';
                input.classList.remove('validated');
            });

            document.querySelectorAll('select').forEach(select => {
                select.selectedIndex = 0;
                select.style.borderColor = '#ddd';
                select.classList.remove('validated');
            });

            document.querySelectorAll('.role-option, .location-option').forEach(option => {
                option.classList.remove('selected');
            });

            document.querySelectorAll('.file-upload-label span').forEach(span => {
                span.textContent = 'Choose File';
            });

            document.querySelectorAll('.file-name').forEach(div => {
                div.textContent = '';
                div.style.display = 'none';
            });

            document.querySelectorAll('.error-message').forEach(el => {
                el.textContent = '';
                el.style.display = 'none';
            });

            document.getElementById('addressCounter').textContent = '0/200 characters';
            document.getElementById('copyMessage').style.display = 'none';

            showPage(1);
            togglePreviousEmploymentFields();
        }

        async function submitForm() {
            console.log('Starting form submission');
            if (!validatePage(5)) {
                console.log('Validation failed on page 5');
                return;
            }

            try {
                console.log('Building form data');
                const formData = {
                    referralId: 'REF-' + Math.random().toString(36).substr(2, 9).toUpperCase(),
                    role: document.getElementById('role').value,
                    position: document.getElementById('position').value,
                    location: document.getElementById('location').value,
                    name: document.getElementById('name').value,
                    email: document.getElementById('email').value,
                    phone: document.getElementById('phone').value,
                    guardianName: document.getElementById('guardianName').value,
                    guardianPhone: document.getElementById('guardianPhone').value,
                    address: document.getElementById('address').value,
                    documents: {},
                    previousEmployment: document.getElementById('experienced').checked ? {
                        company: document.getElementById('prevCompany').value,
                        experience: document.getElementById('prevExperience').value,
                        role: document.getElementById('prevRole').value,
                        relievingLetter: null
                    } : null,
                    status: 'pending',
                    submissionDate: new Date().toISOString()
                };

                console.log('Processing files');
                const filesToStore = ['ssc', 'hsc', 'ug', 'pg', 'relievingLetter'];
                for (const field of filesToStore) {
                    const fileInput = document.getElementById(field);
                    if (fileInput.files[0]) {
                        const file = fileInput.files[0];
                        if (file.size > 5 * 1024 * 1024) {
                            console.log(`File size exceeds 5MB for ${field}`);
                            alert(`${field.toUpperCase()} file size exceeds 5MB`);
                            return;
                        }
                        const base64Data = await getBase64(file);
                        if (field === 'relievingLetter' && formData.previousEmployment) {
                            formData.previousEmployment.relievingLetter = {
                                name: file.name,
                                data: base64Data,
                                type: file.type,
                                uploadDate: new Date().toISOString()
                            };
                        } else if (['ssc', 'hsc', 'ug', 'pg'].includes(field)) {
                            formData.documents[field] = {
                                name: file.name,
                                data: base64Data,
                                type: file.type,
                                uploadDate: new Date().toISOString()
                            };
                        }
                    }
                }

                console.log('Sending form data to server');
                const response = await fetch('http://16.170.249.150:3095/api/employee/submit', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(formData)
                });

                const result = await response.json();
                console.log('Server response:', result);

                if (response.ok) {
                    console.log('Form submission successful, showing alert');
                    alert(`Form submitted successfully! Your referral ID is: ${result.referralId}`);
                    
                    console.log('Navigating to success page');
                    const referralIdDisplay = document.getElementById('referralIdDisplay');
                    if (referralIdDisplay) {
                        referralIdDisplay.textContent = result.referralId;
                    } else {
                        console.error('Referral ID display element not found');
                    }
                    
                    showPage(6);
                } else {
                    console.error('Server error:', result.error);
                    alert(`Error: ${result.error}`);
                }
            } catch (error) {
                console.error('Submission error:', error);
                alert('Error submitting form: ' + error.message);
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded');
            togglePreviousEmploymentFields();
            
            document.getElementById('prevCompany').addEventListener('input', function() {
                restrictToAlphabetsAndSpaces(this);
                validateInputField(this, 'prevCompanyError', validateCompanyName, 'Company name must be 5-30 alphabets and spaces');
            });
            
            document.getElementById('prevExperience').addEventListener('input', function() {
                restrictToTwoDigits(this);
                validateInputField(this, 'prevExperienceError', validateYearsOfExperience, 'Years of experience must be 0-45 years');
            });
            
            document.getElementById('prevRole').addEventListener('input', function() {
                restrictToAlphabetsAndSpaces(this);
                validateInputField(this, 'prevRoleError', validateRole, 'Role must be 1-100 alphabets and spaces');
            });
            
            document.getElementById('relievingLetter').addEventListener('change', function() {
                updateFileName(this, 'relievingLetterLabel');
                const errorElement = document.getElementById('relievingLetterError');
                
                if (document.getElementById('experienced').checked && this.files.length === 0) {
                    errorElement.textContent = 'Relieving letter is required for experienced professionals';
                    errorElement.style.display = 'block';
                } else {
                    errorElement.textContent = '';
                    errorElement.style.display = 'none';
                }
            });
            
            document.getElementById('experienced').addEventListener('change', togglePreviousEmploymentFields);
            document.getElementById('fresher').addEventListener('change', togglePreviousEmploymentFields);
            
            document.getElementById('name').addEventListener('input', function() {
                restrictToAlphabetsAndSpaces(this);
                const errorElement = document.getElementById('nameError');
                
                if (this.value.trim() !== '' && !validateName(this.value)) {
                    errorElement.textContent = 'Name must be 5-30 alphabets and spaces';
                    errorElement.style.display = 'block';
                    this.style.borderColor = 'red';
                } else if (this.value.trim() === '') {
                    errorElement.textContent = 'Name is required';
                    errorElement.style.display = 'block';
                    this.style.borderColor = 'red';
                } else {
                    errorElement.textContent = '';
                    errorElement.style.display = 'none';
                    this.style.borderColor = '#2ecc71';
                }
            });
            
            document.getElementById('guardianName').addEventListener('input', function() {
                restrictToAlphabetsAndSpaces(this);
                const errorElement = document.getElementById('guardianNameError');
                
                if (this.value.trim() !== '' && !validateName(this.value)) {
                    errorElement.textContent = 'Guardian name must be 5-30 alphabets and spaces';
                    errorElement.style.display = 'block';
                    this.style.borderColor = 'red';
                } else if (this.value.trim() === '') {
                    errorElement.textContent = 'Guardian name is required';
                    errorElement.style.display = 'block';
                    this.style.borderColor = 'red';
                } else {
                    errorElement.textContent = '';
                    errorElement.style.display = 'none';
                    this.style.borderColor = '#2ecc71';
                }
            });
            
            document.getElementById('phone').addEventListener('input', function() {
                restrictToDigits(this);
                const errorElement = document.getElementById('phoneError');
                
                if (this.value.trim() !== '' && !validatePhone(this.value)) {
                    errorElement.textContent = 'Phone number must be 10 digits, start with 6-9, and not be repetitive or sequential';
                    errorElement.style.display = 'block';
                    this.style.borderColor = 'red';
                } else if (this.value.trim() === '') {
                    errorElement.textContent = 'Phone number is required';
                    errorElement.style.display = 'block';
                    this.style.borderColor = 'red';
                } else {
                    const guardianPhone = document.getElementById('guardianPhone').value;
                    if (guardianPhone && this.value === guardianPhone) {
                        errorElement.textContent = 'Phone number cannot be the same as guardian phone';
                        errorElement.style.display = 'block';
                        this.style.borderColor = 'red';
                    } else {
                        errorElement.textContent = '';
                        errorElement.style.display = 'none';
                        this.style.borderColor = '#2ecc71';
                    }
                }
            });
            
            document.getElementById('guardianPhone').addEventListener('input', function() {
                restrictToDigits(this);
                const errorElement = document.getElementById('guardianPhoneError');
                
                if (this.value.trim() !== '' && !validatePhone(this.value)) {
                    errorElement.textContent = 'Guardian phone must be 10 digits, start with 6-9, and not be repetitive or sequential';
                    errorElement.style.display = 'block';
                    this.style.borderColor = 'red';
                } else if (this.value.trim() === '') {
                    errorElement.textContent = 'Guardian phone is required';
                    errorElement.style.display = 'block';
                    this.style.borderColor = 'red';
                } else {
                    const phone = document.getElementById('phone').value;
                    if (phone && this.value === phone) {
                        errorElement.textContent = 'Guardian phone cannot be the same as your phone';
                        errorElement.style.display = 'block';
                        this.style.borderColor = 'red';
                    } else {
                        errorElement.textContent = '';
                        errorElement.style.display = 'none';
                        this.style.borderColor = '#2ecc71';
                    }
                }
            });
            
            document.getElementById('address').addEventListener('input', function() {
                restrictAddressInput(this);
                updateCharCounter(this, 'addressCounter', 200);
                const errorElement = document.getElementById('addressError');
                
                if (this.value.trim() === '') {
                    errorElement.textContent = 'Address is required';
                    errorElement.style.display = 'block';
                    this.style.borderColor = 'red';
                } else if (!validateAddress(this.value)) {
                    errorElement.textContent = 'Address cannot exceed 200 characters, contain multiple spaces, or have 5+ consecutive digits/special characters';
                    errorElement.style.display = 'block';
                    this.style.borderColor = 'red';
                } else {
                    errorElement.textContent = '';
                    errorElement.style.display = 'none';
                    this.style.borderColor = '#2ecc71';
                }
            });
            
            document.getElementById('email').addEventListener('input', function() {
                restrictEmailInput(this);
                const errorElement = document.getElementById('emailError');
                
                if (this.value.trim() === '') {
                    errorElement.textContent = 'Email is required';
                    errorElement.style.display = 'block';
                    this.style.borderColor = 'red';
                } else if (!validateEmail(this.value)) {
                    errorElement.textContent = 'Email must have at least 5 alphanumeric characters before @gmail.com and only allow @, ., _';
                    errorElement.style.display = 'block';
                    this.style.borderColor = 'red';
                } else {
                    errorElement.textContent = '';
                    errorElement.style.display = 'none';
                    this.style.borderColor = '#2ecc71';
                }
            });
            
            document.getElementById('email').addEventListener('paste', function(e) {
                e.preventDefault();
                const pastedData = (e.clipboardData || window.clipboardData).getData('text');
                const cleanData = pastedData.replace(/[^a-zA-Z0-9@._]/g, '').slice(0, 40);
                this.value = cleanData;
                restrictEmailInput(this);
            });
            
            document.getElementById('ssc').addEventListener('change', function() {
                updateFileName(this, 'sscLabel');
                const errorElement = document.getElementById('sscError');
                
                if (this.files.length === 0) {
                    errorElement.textContent = 'This certificate is required';
                    errorElement.style.display = 'block';
                } else {
                    errorElement.textContent = '';
                    errorElement.style.display = 'none';
                }
            });
            
            document.getElementById('hsc').addEventListener('change', function() {
                updateFileName(this, 'hscLabel');
                const errorElement = document.getElementById('hscError');
                
                if (this.files.length === 0) {
                    errorElement.textContent = 'This certificate is required';
                    errorElement.style.display = 'block';
                } else {
                    errorElement.textContent = '';
                    errorElement.style.display = 'none';
                }
            });
            
            document.getElementById('ug').addEventListener('change', function() {
                updateFileName(this, 'ugLabel');
                const errorElement = document.getElementById('ugError');
                
                if (this.files.length === 0) {
                    errorElement.textContent = 'This certificate is required';
                    errorElement.style.display = 'block';
                } else {
                    errorElement.textContent = '';
                    errorElement.style.display = 'none';
                }
            });
            
            document.getElementById('pg').addEventListener('change', function() {
                updateFileName(this, 'pgLabel');
            });
            
            document.querySelectorAll('.error-message').forEach(el => {
                el.style.display = 'none';
                el.style.color = 'red';
                el.style.fontSize = '12px';
                el.style.marginTop = '5px';
            });
            
            const emailLabel = document.querySelector('label[for="email"]');
            if (emailLabel) {
                const infoIcon = document.createElement('span');
                infoIcon.className = 'info-icon';
                infoIcon.innerHTML = ' ‚ÑπÔ∏è';
                infoIcon.title = 'Email must have at least 5 alphanumeric characters before @gmail.com and only allow @, ., _';
                emailLabel.appendChild(infoIcon);
            }
            
            const nameLabel = document.querySelector('label[for="name"]');
            if (nameLabel) {
                const nameInfoIcon = document.createElement('span');
                nameInfoIcon.className = 'info-icon';
                nameInfoIcon.innerHTML = ' ‚ÑπÔ∏è';
                nameInfoIcon.title = 'Name must be 5-30 alphabets and spaces';
                nameLabel.appendChild(nameInfoIcon);
            }
            
            const guardianNameLabel = document.querySelector('label[for="guardianName"]');
            if (guardianNameLabel) {
                const guardianNameInfoIcon = document.createElement('span');
                guardianNameInfoIcon.className = 'info-icon';
                guardianNameInfoIcon.innerHTML = ' ‚ÑπÔ∏è';
                guardianNameInfoIcon.title = 'Guardian name must be 5-30 alphabets and spaces';
                guardianNameLabel.appendChild(guardianNameInfoIcon);
            }
            
            const phoneLabel = document.querySelector('label[for="phone"]');
            if (phoneLabel) {
                const phoneInfoIcon = document.createElement('span');
                phoneInfoIcon.className = 'info-icon';
                phoneInfoIcon.innerHTML = ' ‚ÑπÔ∏è';
                phoneInfoIcon.title = 'Phone number must be 10 digits, start with 6-9, not repetitive or sequential, and different from guardian phone';
                phoneLabel.appendChild(phoneInfoIcon);
            }
            
            const guardianPhoneLabel = document.querySelector('label[for="guardianPhone"]');
            if (guardianPhoneLabel) {
                const guardianPhoneInfoIcon = document.createElement('span');
                guardianPhoneInfoIcon.className = 'info-icon';
                guardianPhoneInfoIcon.innerHTML = ' ‚ÑπÔ∏è';
                guardianPhoneInfoIcon.title = 'Guardian phone must be 10 digits, start with 6-9, not repetitive or sequential, and different from your phone';
                guardianPhoneLabel.appendChild(guardianPhoneInfoIcon);
            }
            
            const addressLabel = document.querySelector('label[for="address"]');
            if (addressLabel) {
                const addressInfoIcon = document.createElement('span');
                addressInfoIcon.className = 'info-icon';
                addressInfoIcon.innerHTML = ' ‚ÑπÔ∏è';
                addressInfoIcon.title = 'Address cannot exceed 200 characters, must have single spaces, and cannot have 5+ consecutive digits/special characters';
                addressLabel.appendChild(addressInfoIcon);
            }
        });

        window.onload = function() {
            console.log('Window loaded');
            updateProgressBar();
            const fileLabels = {
                'sscLabel': 'supported documents (PDF, JPG, JPEG, PNG, max 5MB)',
                'hscLabel': 'supported documents (PDF, JPG, JPEG, PNG, max 5MB)',
                'ugLabel': 'supported documents (PDF, JPG, JPEG, PNG, max 5MB)',
                'pgLabel': 'supported documents if available (PDF, JPG, JPEG, PNG, max 5MB)',
                'relievingLetterLabel': 'supported documents (PDF, JPG, JPEG, PNG, max 5MB)'
            };
            
            for (const [labelId, hintText] of Object.entries(fileLabels)) {
                const label = document.getElementById(labelId);
                if (label) {
                    const hint = document.createElement('div');
                    hint.className = 'file-hint';
                    hint.textContent = hintText;
                    hint.style.fontSize = '12px';
                    hint.style.color = '#666';
                    hint.style.marginTop = '2px';
                    label.parentNode.insertBefore(hint, label.nextSibling);
                }
            }
        };
    </script>
</body>
</html>